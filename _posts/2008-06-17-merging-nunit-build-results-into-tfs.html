---
layout: post
title: Merging NUnit build results into TFS 2008 Team Build Logs - First Attempts
date: '2008-06-17T21:28:00.001+10:00'
author: Richard Banks
tags:
- readify
- testing
- TFS
- tools
modified_time: '2008-06-17T21:28:21.206+10:00'
thumbnail: http://lh6.ggpht.com/rbanks54/SFefpmLommI/AAAAAAAAAYM/KjFdK3AceHA/s72-c/clip_image002_thumb2.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-13321238.post-7540395201028145076
blogger_orig_url: http://www.richard-banks.org/2008/06/merging-nunit-build-results-into-tfs.html
---

<p><a href="http://www.paulstovell.com/blog" target="_blank">Paul Stovell</a> was talking about <a href="http://msdn.microsoft.com/en-us/tfs2008/default.aspx" target="_blank">TFS</a> on the internal <a href="http://www.readify.net" target="_blank">Readify</a> mailing list recently and was bemoaning the fact that you can't get NUnit test results into the TFS Team Build log in Visual Studio 2008.  <p>Well, I decided to have a crack at it today and see how hard it really was and I managed to get something going.  <p>So here’s where we start.&nbsp; A completed build with no test results showing.&nbsp; Pretty normal situation.  <p><a href="http://lh5.ggpht.com/rbanks54/SFefo9R2nVI/AAAAAAAAAYI/b9xu_4_-o7Q/s1600-h/clip_image0025.jpg"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" border="0" alt="clip_image002" src="http://lh6.ggpht.com/rbanks54/SFefpmLommI/AAAAAAAAAYM/KjFdK3AceHA/clip_image002_thumb2.jpg?imgmax=800" width="554" height="179"></a>  <p>Now I wanted to get something in there so I ran some unit tests (from a completely different solution as it turns out) using NUnit and saved the results to an XML file.&nbsp; Then I wrote an XSLT to transform the nunit xml output into a test result file Visual Studio 2008 would load.  <p>That took some work, and the XSLT is pretty ugly, but eventually I got it to the point where VS loaded the trx file and viewed the results. I then used MSTest to publish the results to the build log (using the /publish options) but even that was a bit problematic as it exposed some issues with GUIDs in the XSLT that I had to deal with, but in the end I got it working, albeit manually at this stage.  <p>It does mean that the build server will need MSTest installed on it, but at least all the development team can have a bit more flexibility in their testing tools, and don't have to migrate all their Nunit tests to MSTest just to get them in the build log.  <p>The process is pretty simple  <ol> <li>Run Nunit-console and produce an XML log file  <li>Convert the Nunit XML output to an MSTest test results file (with a .trx extension)  <li>Use MSTest /publish to push merge the trx file with an existing build</li></ol> <p>So here’s the result, and surprisingly enough it looks just like a normal TFS team build log:  <p><a href="http://lh4.ggpht.com/rbanks54/SFefqaTfRXI/AAAAAAAAAYQ/RRifUyqGKWc/s1600-h/clip_image0047.jpg"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" border="0" alt="clip_image004" src="http://lh5.ggpht.com/rbanks54/SFefrLCp_ZI/AAAAAAAAAYU/-RyT9aOqaVU/clip_image004_thumb4.jpg?imgmax=800" width="644" height="112"></a>  <p>And if I click the build results?&nbsp; Yep – they load up as expected as well.  <p><a href="http://lh6.ggpht.com/rbanks54/SFeft65X6EI/AAAAAAAAAYY/ktNPVytgJ5M/s1600-h/clip_image0065.jpg"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" border="0" alt="clip_image006" src="http://lh6.ggpht.com/rbanks54/SFefvEEGnFI/AAAAAAAAAYc/JxbmN8Qic7M/clip_image006_thumb2.jpg?imgmax=800" width="396" height="333"></a>  <p>And clicking through to an individual test gives me something like this:  <p><a href="http://lh4.ggpht.com/rbanks54/SFefxNpINiI/AAAAAAAAAYg/NS4-0JUC-p0/s1600-h/clip_image0083.jpg"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" border="0" alt="clip_image008" src="http://lh5.ggpht.com/rbanks54/SFefyT8wwYI/AAAAAAAAAYk/nBcygzkfT40/clip_image008_thumb.jpg?imgmax=800" width="426" height="199"></a>  <p>And because it's a published build, the test results appear in the data warehouse as well, available for reporting as seen here: <p><a href="http://lh6.ggpht.com/rbanks54/SFefzhIAqZI/AAAAAAAAAYo/GnXAd2kkBAs/s1600-h/image%5B3%5D.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" border="0" alt="image" src="http://lh4.ggpht.com/rbanks54/SFef00IZC1I/AAAAAAAAAYs/r0dY8fbGmlw/image_thumb%5B1%5D.png?imgmax=800" width="644" height="445"></a>  <p>At this point this is all just proving a point, and it’s still very much a manual process.&nbsp; Also I’ve only tried loading test results where all tests are passing but it's working and I think it's a good start for doing things properly.&nbsp; Assuming there's enough interest I'll try and turn this into something that can be used in a build process - maybe write it as an MSBuild custom task or something like that. <p>Let me know if you'd like to see me put some more effort into this or if you've got any feedback.</p>  