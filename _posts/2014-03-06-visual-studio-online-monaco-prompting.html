---
layout: post
title: Visual Studio Online (Monaco) prompting for credentials in IE
date: '2014-03-06T16:48:00.001+11:00'
author: Richard Banks
tags:
- Visual Studio
modified_time: '2014-03-06T16:48:29.868+11:00'
thumbnail: http://lh4.ggpht.com/-tHGJsCNkyVY/UxgMFrSh7GI/AAAAAAAABnQ/IzxLVo_TASU/s72-c/image_thumb%25255B3%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-13321238.post-1444197573678697179
blogger_orig_url: http://www.richard-banks.org/2014/03/visual-studio-online-monaco-prompting.html
---

<p>There’s a funny/strange behavioural difference when clicking the ‘Edit in Visual Studio Online’ link in the Windows Azure management portal between Internet Explorer, Firefox and Chrome.</p> <p><a href="http://lh3.ggpht.com/-_bpKNkvivAE/UxgME-hX-5I/AAAAAAAABnI/LptKdvJAc34/s1600-h/image%25255B7%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://lh4.ggpht.com/-tHGJsCNkyVY/UxgMFrSh7GI/AAAAAAAABnQ/IzxLVo_TASU/image_thumb%25255B3%25255D.png?imgmax=800" width="283" height="109"></a></p> <p>In Chrome you will be taken straight into the development environment and the Monaco editor as expected. That said, if you watch the network trace in Fiddler you’ll actually see that there’s an initial failed initial authentication request before a second attempt is made with a different set of request headers.</p> <p><a href="http://lh6.ggpht.com/-DWg0dWWOYMA/UxgMGEopi4I/AAAAAAAABnY/R-W2m8jXjBM/s1600-h/image%25255B22%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://lh3.ggpht.com/-ZzkfLCUTb40/UxgMG51X94I/AAAAAAAABng/ny5u-Bb_Efk/image_thumb%25255B12%25255D.png?imgmax=800" width="294" height="233"></a></p> <p>On Firefox you get a slightly different behaviour and will be asked if you want to log in using an account based on your site name with a $ prefix, as shown here:</p> <p><a href="http://lh3.ggpht.com/-BQHafkvXn54/UxgMHR6FysI/AAAAAAAABno/-ewozM7SUxA/s1600-h/image%25255B20%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://lh4.ggpht.com/-jAfeSA1MKo8/UxgMIA5vAHI/AAAAAAAABnw/SaWR49GOfZQ/image_thumb%25255B10%25255D.png?imgmax=800" width="404" height="89"></a></p> <p>But in Internet Explorer it’s different again and you get prompted for your credentials.</p> <p><a href="http://lh4.ggpht.com/-fmNlzu5g8-o/UxgMIpKF8wI/AAAAAAAABn4/BrbToYJ3evI/s1600-h/image%25255B10%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://lh5.ggpht.com/-FDcypyog8Q0/UxgMJUtvqDI/AAAAAAAABoA/K-Au2keg6Fg/image_thumb%25255B4%25255D.png?imgmax=800" width="244" height="173"></a></p> <p>If you try and log in by entering your Microsoft Account (Live Id) details it won’t work. You could try using the $ prefixed account that Firefox asked you about, but what password would you use? I’ve got no idea.</p> <p>So what’s going on here?</p> <p>It turns out that this is an IE security behaviour that occurs when the first auth challenge fails. Because Monaco in VSO uses same infrastructure as Azure git deployments (<a href="https://github.com/projectkudu/kudu" target="_blank">the Kudu project</a>) to connect to the web site’s host virtual machine, it’s not your Microsoft Account but your Azure deployment credentials that you are being prompted for. I presume it’s your Microsoft Account details used in the first, rejected, request and then after that you need to put in your credentials. Why Chrome allows you to connect with a different account on the second request, I’m unsure. I’d expect that a security nerd could fill me in on all the gory details.</p> <p>In any case, if you can’t remember what those Azure deployment credentials are (why aren’t you using a <a href="http://keepass.info/" target="_blank">password manager</a>!) then you can always reset them from the Azure portal. Be aware that this changes the credentials used for all your git based deployments on all your Azure sites.</p> <p><a href="http://lh6.ggpht.com/--_ggg_f0mlI/UxgMJ3qePmI/AAAAAAAABoI/DYxuEOcFex8/s1600-h/image%25255B13%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://lh3.ggpht.com/-9a4NPKdRXL4/UxgMK1q3MgI/AAAAAAAABoQ/CuXIN1eTyiw/image_thumb%25255B5%25255D.png?imgmax=800" width="244" height="82"></a></p>     <p>I’m hoping that this is only a temporary difference in behaviour and that future updates fix the inconsistencies. Until then, enjoy using VSO and Monaco! :-)</p>  