---
layout: post
title: A Check In Checklist
date: '2007-12-04T08:55:00.001+11:00'
author: Richard Banks
tags:
- readify
- TFS
- CruiseControl.NET
- development
modified_time: '2007-12-04T08:55:25.090+11:00'
thumbnail: http://lh4.google.com/rbanks54/R1R7MDJDlCI/AAAAAAAAALA/_zCq2WBCxsU/s72-c/clip_image002_thumb
blogger_id: tag:blogger.com,1999:blog-13321238.post-7661195942748320562
blogger_orig_url: http://www.richard-banks.org/2007/12/check-in-checklist.html
---

<p>Team based software development projects usually give a lot of thought to what source control repository to use (<a href="http://msdn2.microsoft.com/en-us/teamsystem/aa718934.aspx" target="_blank">TFS</a>, <a href="http://subversion.tigris.org/" target="_blank">Subversion</a>, <a href="http://www.cvshome.org/" target="_blank">CVS</a>, <a href="http://www.bitkeeper.com/" target="_blank">BitKeeper</a>, etc), how/when they should branch their code, what they do with coding standards, etc.&nbsp; Yet at the same time not a lot of attention is given to the art of the check in.&nbsp; Most teams assume that a check in is just a matter of clicking the check in/commit changes button and that's it.</p> <p>As a result many teams often run afoul of check ins gone wrong and time and again find themselves rolling back changes or fighting with each other over why a change was done or constantly falling back to the "it works on my machine" line when the changes they make break a whole bunch of other things in the app.&nbsp; And usually this happens during crunch time when everyone is trying to finish up their work before a deadline.</p> <p>In an effort to prevent this happening, below is a potential check in checklist you might want to use as a basis for helping your team improve the way they commit code to the source repository.&nbsp; The most important thing to note is that it's not the steps themselves that result in good check ins, but rather it's the team thinking about what they're doing and sweating the details of each change before committing.</p> <p>So, here's the checklist:</p> <p>&nbsp;</p> <h3>Pre Check In</h3> <p>Before any check in occurs make sure that you have done a code review and run all of your unit tests (not just the ones that touch on your code changes).&nbsp; You should also make sure that you have covered the following:  <p>1. Retrieved the latest code from the source repository [for the entire project, not just the area you are working on] and merged any changes <p>2. If you work against local copies of databases, ensure that your database schema's are up to date  <p>3. Make sure your code compiles (it might sound obvious but you'd be surprised how often this step is skipped on small changes or after a merge from step 1)  <p>4. Make sure ALL unit tests pass.  <p>5. If you have functional tests or other build verification tests (BVT’s) make sure they pass as well  <p>6. Ensure all code is commented appropriately  <p>7. Any UI changes have been communicated to testers as appropriate  <p>8. Any solution changes have been communicated to the build master (if you have one)  <p>&nbsp; <h3>Check In</h3> <p>Do <b>NOT</b> check in anything if the Continuous Integration build is broken (<i>with the exception of check ins to specifically fix breaks</i>).&nbsp; This will help ensure that the effort put into fixing a broken build is not stymied by a moving code base.  <p>When checking in, write appropriate comments.&nbsp; The first line of a check in comment is used as a title in many source control systems so it's good habit to write comments using multiple lines where possible. <p>Check in all files whenever possible and do the check in from the root.&nbsp; This will help ensure that you don’t miss files in the check in process, which is a common occurrence when checking in from a sub-folder.&nbsp; Also, if you have a file checked out that you don’t need anymore then undo/revert your changes so that you don’t have masses of files with pending changes hanging around.&nbsp; Having many files in this state makes it easy to either miss a file you want checked in or to incorrectly commit a file you didn't want to change.  <p>If you use CI builds and daily builds try to avoid doing check ins right before the daily build kicks off.&nbsp; If the CI build breaks you want to make sure you have time to fix any problems that may arise before the daily build starts (why break 2 builds right?).  <p>SPECIAL CASE: Large Check Ins.&nbsp; When doing a large check in try and do it first thing in the morning.&nbsp; That way if it breaks the build you will have enough time to fix things during the day. <p>&nbsp; <h3>Post Check In</h3> <p>If you use Continuous Integration then after doing a check in DON’T GO ANYWHERE. Don’t leave for the day, don’t go to lunch and don’t rush off to a meeting. You’re not done yet!&nbsp; You need to make sure that your CI build succeeds.  <p>If you use TFS you can open up Team Explorer and select the Team Builds.&nbsp; Choose the “All Build Types” entry (or your CI build type) and double click it.  <p><a href="http://lh6.google.com/rbanks54/R1R7LjJDlBI/AAAAAAAAAK4/3Clz21icMpM/clip_image0023"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="50" alt="clip_image002" src="http://lh4.google.com/rbanks54/R1R7MDJDlCI/AAAAAAAAALA/_zCq2WBCxsU/clip_image002_thumb" width="243" border="0"></a>  <p>Watch that the CI build starts (typically about 1 minute after check in) and watch/wait until it completes successfully.&nbsp; This image shows a build in progress.  <p><a href="http://lh5.google.com/rbanks54/R1R7MTJDlDI/AAAAAAAAALI/un1XL4Qw99s/clip_image004%5B1%5D"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="56" alt="clip_image004" src="http://lh5.google.com/rbanks54/R1R7NTJDlEI/AAAAAAAAALQ/4WaWNFObHyM/clip_image004_thumb%5B1%5D" width="262" border="0"></a>  <p>If it all succeeds then you're sweet and can go do what ever else you had in mind.&nbsp; If it breaks then it's your responsibility to figure out what went wrong.  <h3>&nbsp;</h3> <h3>Diagnosis</h3> <p>If you did break the build, you can double click the build in <a href="http://msdn2.microsoft.com/en-us/library/ms181304(VS.80).aspx" target="_blank">Team Explorer</a> and have a look to see if the break was specifically related to your changes. <p>If you use <a href="http://ccnet.thoughtworks.com/" target="_blank">CC.NET</a> you can view the build details from the web dashboard (either by opening it up manually or double clicking the build from CCTray) <h4>What was Included?</h4> <p>It’s often useful to know what was actually included in the build.&nbsp; To find out, go to the bottom of the summary and click the highlighted link  <p><a href="http://lh3.google.com/rbanks54/R1R7NzJDlFI/AAAAAAAAALY/3yFtYV4_YX8/clip_image006%5B1%5D"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="71" alt="clip_image006" src="http://lh5.google.com/rbanks54/R1R7OTJDlGI/AAAAAAAAALg/cShQagDC36I/clip_image006_thumb%5B1%5D" width="419" border="0"></a>  <p>After you click the [+] you’ll then see all the changesets since the last successful build, with the latest ones shown at the bottom. Clicking the links will show you what was in the changeset and may give you a clue as to what else might have snuck into the build that you weren't aware of. <p>If you are using CruiseControl.NET all the revisions in the build are usually shown at the top of the build summary. <h4>Test Failures</h4> <p>Test failures are usually easy to spot.&nbsp; You should see something like this:  <p><a href="http://lh4.google.com/rbanks54/R1R7PDJDlHI/AAAAAAAAALo/Y2SxJrIuWLY/clip_image012%5B1%5D"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="80" alt="clip_image012" src="http://lh6.google.com/rbanks54/R1R7PjJDlII/AAAAAAAAALw/U2UnZnEfpk4/clip_image012_thumb%5B1%5D" width="277" border="0"></a>  <p>Look down further and open up the Details view (click the [+])  <p><a href="http://lh5.google.com/rbanks54/R1R7QTJDlJI/AAAAAAAAAL4/pMRUUr06xn8/clip_image014%5B1%5D"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="48" alt="clip_image014" src="http://lh4.google.com/rbanks54/R1R7RDJDlKI/AAAAAAAAAMA/afCJ2roGDhA/clip_image014_thumb%5B1%5D" width="629" border="0"></a>  <p>To see which test run(s) failed.&nbsp; You can also click the failing test run to get the individual test results.&nbsp; Find the failing test(s)  <p><a href="http://lh5.google.com/rbanks54/R1R7RTJDlLI/AAAAAAAAAMI/Omo4w75V2To/clip_image0183"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="90" alt="clip_image018" src="http://lh3.google.com/rbanks54/R1R7RzJDlMI/AAAAAAAAAMQ/eCjrpeocRyk/clip_image018_thumb" width="148" border="0"></a>  <p>And double click it to see what the details are and take action from there.  <p>Under CruiseControl.NET the test summary is usually shown on the summary page, and you then have to click the NUnit Results on the left of the page to see the details.&nbsp; The NUnit list will then show which tests failed, and by drilling down you can typically see the test failure reasons. <h4>Compilation Failures</h4> <p>These are easy to diagnose and usually relate to people forgetting to include new files in the check in process.&nbsp; A compilation problem will bomb out the build before testing starts  <p>In TFS look down at the bottom the build summary and click the build details as shown  <p><a href="http://lh5.google.com/rbanks54/R1R7STJDlNI/AAAAAAAAAMY/K66Q-GZDtNM/clip_image022%5B1%5D"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="89" alt="clip_image022" src="http://lh3.google.com/rbanks54/R1R7SzJDlOI/AAAAAAAAAMg/c_gfKXiZO4c/clip_image022_thumb%5B1%5D" width="505" border="0"></a>  <p>This will open a text file with just the errors and warnings from the build, and it's a lot smaller than the full build log so it's much easier to spot the problem.&nbsp; Have a look for the error and take action as appropriate.  <p>Under CruiseControl.NET you will usually see compilation errors on the build summary, however further details can be found within the the detailed build log itself.&nbsp; In a CC.NET environment, a compilation failure will also mean that the usual NUnit &amp; FxCop information won't get shown on the summary page - these sections will either be blank or missing. <h4>&nbsp;</h4> <p>I hope this is useful for you and gives you a starting point for your own teams.</p>  