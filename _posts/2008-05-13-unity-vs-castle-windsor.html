---
layout: post
title: Unity vs Castle Windsor
date: '2008-05-13T21:19:00.001+10:00'
author: Richard Banks
tags:
- readify
- ".net"
- development
- microsoft
modified_time: '2008-05-13T21:19:51.237+10:00'
blogger_id: tag:blogger.com,1999:blog-13321238.post-2996122297004461182
blogger_orig_url: http://www.richard-banks.org/2008/05/unity-vs-castle-windsor.html
---

<p>Recently I did a post on breaking dependencies which used the <a href="http://www.castleproject.org/container/index.html" target="_blank">Castle Windsor container</a> as the Inversion of Control container.&nbsp; I thought I'd also have a look at doing the same thing with the <a href="http://www.codeplex.com/unity" target="_blank">Unity container</a> from Microsoft's Patterns &amp; Practices team, which was version 1.0'ed last month.</p> <p>The good news?&nbsp; It's pretty much just some slight syntax changes and that's about it.&nbsp; The only problem I found was that after installing the Unity help file for VS2008 my Visual Studio help is now broken and now I have to go and repair my Visual Studio installation.&nbsp; I'd suggest sticking to the CHM file instead.</p> <p>Here's the only differences between the two applications:</p> <h4>1. References (duh!)</h4> <h5>Castle Windsor</h5><pre class="codeblock"><span style="color: rgb(0,0,255)">using</span> Castle.Windsor;<br /><span style="color: rgb(0,0,255)">using</span> Castle.Core.Resource;<br /><span style="color: rgb(0,0,255)">using</span> Castle.Windsor.Configuration.Interpreters;</pre><br /><h5>Unity</h5><pre class="codeblock"><span style="color: rgb(0,0,255)">using</span> System.Configuration;<br /><span style="color: rgb(0,0,255)">using</span> Microsoft.Practices.Unity;<br /><span style="color: rgb(0,0,255)">using</span> Microsoft.Practices.Unity.Configuration;</pre><br /><h4>2. Instantiating the Container</h4><br /><h5>Castle Windsor</h5><pre class="codeblock">            <span style="color: rgb(43,145,175)">IWindsorContainer</span> container = <span style="color: rgb(0,0,255)">new</span> <span style="color: rgb(43,145,175)">WindsorContainer</span>(<span style="color: rgb(0,0,255)">new</span> <span style="color: rgb(43,145,175)">XmlInterpreter</span>());</pre><br /><h5>Unity</h5><pre class="codeblock">            <span style="color: rgb(43,145,175)">IUnityContainer</span> container = <span style="color: rgb(0,0,255)">new</span> <span style="color: rgb(43,145,175)">UnityContainer</span>();<br /><br />            <span style="color: rgb(43,145,175)">UnityConfigurationSection</span> section = (<span style="color: rgb(43,145,175)">UnityConfigurationSection</span>)<span style="color: rgb(43,145,175)">ConfigurationManager</span>.GetSection(<span style="color: rgb(163,21,21)">"unity"</span>);<br />            section.Containers.Default.Configure(container);</pre><br /><h4>3. The .config files</h4><br /><h5>Castle Windsor</h5><pre class="codeblock"><span style="color: rgb(0,0,255)">&lt;?</span><span style="color: rgb(163,21,21)">xml</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">version</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">1.0</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">encoding</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">utf-8</span>"<span style="color: rgb(0,0,255)"> ?&gt;<br />&lt;</span><span style="color: rgb(163,21,21)">configuration</span><span style="color: rgb(0,0,255)">&gt;<br />    &lt;</span><span style="color: rgb(163,21,21)">configSections</span><span style="color: rgb(0,0,255)">&gt;<br />        &lt;</span><span style="color: rgb(163,21,21)">section</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">name</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">castle</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor</span>"<span style="color: rgb(0,0,255)"> /&gt;<br />    &lt;/</span><span style="color: rgb(163,21,21)">configSections</span><span style="color: rgb(0,0,255)">&gt;<br /><br />    &lt;</span><span style="color: rgb(163,21,21)">castle</span><span style="color: rgb(0,0,255)">&gt;<br />        &lt;</span><span style="color: rgb(163,21,21)">components</span><span style="color: rgb(0,0,255)">&gt;<br />            &lt;</span><span style="color: rgb(163,21,21)">component</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">id</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">prompt.input</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">service</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesPrompter.IInputControl, SalesPrompter</span>"<br /><span style="color: rgb(0,0,255)">                </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesPrompter.PromptInputControl, SalesPrompter</span>"<span style="color: rgb(0,0,255)"> /&gt;<br />            &lt;</span><span style="color: rgb(163,21,21)">component</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">id</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">console.display</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">service</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.IMessageDisplay, SalesTax</span>"<br /><span style="color: rgb(0,0,255)">                </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.ConsoleMessageDisplay, SalesTax</span>"<span style="color: rgb(0,0,255)"> /&gt;<br />            &lt;</span><span style="color: rgb(163,21,21)">component</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">id</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">input.parser</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">service</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.IInputParser, SalesTax</span>"<br /><span style="color: rgb(0,0,255)">                </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.InputParser, SalesTax</span>"<span style="color: rgb(0,0,255)"> /&gt;<br />            &lt;</span><span style="color: rgb(163,21,21)">component</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">id</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">salelinefactory</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">service</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.ISaleLineFactory, SalesTax</span>"<br /><span style="color: rgb(0,0,255)">                </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.SaleLineFactory, SalesTax</span>"<span style="color: rgb(0,0,255)"> /&gt;<br />        &lt;/</span><span style="color: rgb(163,21,21)">components</span><span style="color: rgb(0,0,255)">&gt;<br />    &lt;/</span><span style="color: rgb(163,21,21)">castle</span><span style="color: rgb(0,0,255)">&gt;<br /><br />&lt;/</span><span style="color: rgb(163,21,21)">configuration</span><span style="color: rgb(0,0,255)">&gt;</span></pre><br /><h5>Unity</h5><pre class="codeblock"><span style="color: rgb(0,0,255)">&lt;?</span><span style="color: rgb(163,21,21)">xml</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">version</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">1.0</span>"<span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">encoding</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">utf-8</span>"<span style="color: rgb(0,0,255)"> ?&gt;<br />&lt;</span><span style="color: rgb(163,21,21)">configuration</span><span style="color: rgb(0,0,255)">&gt;<br />    &lt;</span><span style="color: rgb(163,21,21)">configSections</span><span style="color: rgb(0,0,255)">&gt;<br />        &lt;</span><span style="color: rgb(163,21,21)">section</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">name</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">unity</span>"<span style="color: rgb(0,0,255)">  </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration</span>"<span style="color: rgb(0,0,255)"> /&gt;<br />    &lt;/</span><span style="color: rgb(163,21,21)">configSections</span><span style="color: rgb(0,0,255)">&gt;<br /><br />    &lt;</span><span style="color: rgb(163,21,21)">unity</span><span style="color: rgb(0,0,255)">&gt;<br />        &lt;</span><span style="color: rgb(163,21,21)">typeAliases</span><span style="color: rgb(0,0,255)">&gt;&lt;/</span><span style="color: rgb(163,21,21)">typeAliases</span><span style="color: rgb(0,0,255)">&gt;<br />        &lt;</span><span style="color: rgb(163,21,21)">containers</span><span style="color: rgb(0,0,255)">&gt;<br />            &lt;</span><span style="color: rgb(163,21,21)">container</span><span style="color: rgb(0,0,255)">&gt;<br />                &lt;</span><span style="color: rgb(163,21,21)">types</span><span style="color: rgb(0,0,255)">&gt;<br />                    &lt;</span><span style="color: rgb(163,21,21)">type</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesPrompter.IInputControl, SalesPrompter</span>"<span style="color: rgb(0,0,255)"> <br />                        </span><span style="color: rgb(255,0,0)">mapTo</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesPrompter.PromptInputControl, SalesPrompter</span>"<span style="color: rgb(0,0,255)">/&gt;<br />                    &lt;</span><span style="color: rgb(163,21,21)">type</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.IMessageDisplay, SalesTax</span>"<span style="color: rgb(0,0,255)"> <br />                        </span><span style="color: rgb(255,0,0)">mapTo</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.ConsoleMessageDisplay, SalesTax</span>"<span style="color: rgb(0,0,255)">/&gt;<br />                    &lt;</span><span style="color: rgb(163,21,21)">type</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.IInputParser, SalesTax</span>"<span style="color: rgb(0,0,255)"> <br />                        </span><span style="color: rgb(255,0,0)">mapTo</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.InputParser, SalesTax</span>"<span style="color: rgb(0,0,255)">/&gt;<br />                    &lt;</span><span style="color: rgb(163,21,21)">type</span><span style="color: rgb(0,0,255)"> </span><span style="color: rgb(255,0,0)">type</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.ISaleLineFactory, SalesTax</span>"<span style="color: rgb(0,0,255)"> <br />                        </span><span style="color: rgb(255,0,0)">mapTo</span><span style="color: rgb(0,0,255)">=</span>"<span style="color: rgb(0,0,255)">SalesTax.SaleLineFactory, SalesTax</span>"<span style="color: rgb(0,0,255)">/&gt;<br />                &lt;/</span><span style="color: rgb(163,21,21)">types</span><span style="color: rgb(0,0,255)">&gt;<br />            &lt;/</span><span style="color: rgb(163,21,21)">container</span><span style="color: rgb(0,0,255)">&gt;<br />        &lt;/</span><span style="color: rgb(163,21,21)">containers</span><span style="color: rgb(0,0,255)">&gt;<br />    &lt;/</span><span style="color: rgb(163,21,21)">unity</span><span style="color: rgb(0,0,255)">&gt;<br /><br />&lt;/</span><span style="color: rgb(163,21,21)">configuration</span><span style="color: rgb(0,0,255)">&gt;</span></pre><br /><p>&nbsp;</p><br /><p>Note that there was nothing different in the resolving of references.&nbsp; Both containers have a Resolve&lt;T&gt;() method that does exactly the same thing.</p><br /><p>So, how easy is that? :-)&nbsp; The P&amp;P team have done a pretty good job with this container.&nbsp; Admittedly I haven't really looked into some of the more advanced options, but it looks quite good and being from the P&amp;P team it's likely to get more traction that the Castle Windsor container in the corporate development world.</p>  