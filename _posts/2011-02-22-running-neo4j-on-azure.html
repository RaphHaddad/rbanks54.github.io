---
layout: post
title: Running Neo4j on Azure
date: '2011-02-22T13:57:00.000+11:00'
author: Richard Banks
tags:
- database
- ".net"
- development
modified_time: '2011-02-22T13:57:34.894+11:00'
thumbnail: http://lh3.ggpht.com/_5dD_rBQSs2o/TWMls3X0aHI/AAAAAAAAA-Q/7D27NeBITbY/s72-c/image_thumb%5B1%5D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-13321238.post-6625288890736772034
blogger_orig_url: http://www.richard-banks.org/2011/02/running-neo4j-on-azure.html
---

<p>For those of you who don’t know what I’m talking about, <a href="http://neo4j.org/" target="_blank">Neo4j</a> is a graph DB, which is great for dealing with certain types of data such as relationships between people (I find it ironic that relational databases aren’t great for this) and it’s perfect for the project I’m working on at the moment.</p>  <p>However this project also needs to be deployable on Azure, which means if I want a graph DB for storing data, I need something running on Azure.&#160; I’d originally looked at Sones for doing this since it was the only one around that I knew could run on Azure, but my preference was to run Neo4j instead, because I know it a little better, and because I know that the community around it is quite helpful.</p>  <p>The great news is that as of just recently (a week ago at time of writing) <a href="http://blog.neo4j.org/2011/02/announcing-neo4j-on-windows-azure.html" target="_blank">Neo4j can now run on Azure</a>! Happy days!! and “Perfect Timing”™ for my project.&#160; I just had to try it out.&#160; P.S. Feel free to go ahead and read the Neo4j blog post because it has a basic explanation of how to set it up, has some interesting notes on the implementation and also talks about the roadmap ahead.</p>  <p>Here’s a simple step-by-step on how to get Neo4j running on you local Azure development environment:</p>  <p>1. Download the Neo4j software from <a href="http://neo4j.org/download/">http://neo4j.org/download/</a>.&#160; I grabbed the 1.3.M02 (windows) version.</p>  <p>2. You’ll also need to <a href="http://neo4j.org/get?file=Neo4j.Azure.Server.zip" target="_blank">download the Neo4j Azure project</a>, which is linked to from the <a href="http://blog.neo4j.org/2011/02/announcing-neo4j-on-windows-azure.html" target="_blank">Neo4j blog post</a>. </p>  <p>3. I’m assuming you have an up to date Java runtime locally, so go to your program files folder and zip up the jre6 folder.&#160; Call it something creative like jre6.zip :-)</p>  <p>4. If you haven’t already done so I’d also suggest you get yourself a utility for managing Azure blob storage.&#160; I’m using the <a href="http://azureblobstudio.codeplex.com/" target="_blank">Azure Blob Studio 2011</a> <a href="http://visualstudiogallery.msdn.microsoft.com/a5840d76-0dc7-4573-9e39-e08a28e1563e/" target="_blank">Visual Studio Extension</a>.</p>  <p>5. Spin up Visual Studio and load the Neo4j Azure solution.&#160; Make sure the Azure project is the startup project</p>  <p><a href="http://lh5.ggpht.com/_5dD_rBQSs2o/TWMlsck8CDI/AAAAAAAAA-M/tKEFsYomxXI/s1600-h/image%5B3%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh3.ggpht.com/_5dD_rBQSs2o/TWMls3X0aHI/AAAAAAAAA-Q/7D27NeBITbY/image_thumb%5B1%5D.png?imgmax=800" width="294" height="297" /></a></p>  <p>6. Next, upload both the Ne04j and JRE zip files you have to Azure blob storage.&#160; Note that by default the Azure project looks for a neo4j container, so it’s best to create that container first:</p>  <p><a href="http://lh5.ggpht.com/_5dD_rBQSs2o/TWMltnj_G4I/AAAAAAAAA-U/l_16I4fb5n4/s1600-h/image%5B7%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_5dD_rBQSs2o/TWMluQYJfkI/AAAAAAAAA-Y/0t2RZxUGmPE/image_thumb%5B3%5D.png?imgmax=800" width="484" height="98" /></a></p>  <p>7. Now it’s time to spin this thing up!&#160; Press the infamous F5 and wait for a while as Azure gets it act in order, deploys the app and starts everything up for you.&#160; You’ll know things are up and running when a neo4j console app appears on your desktop.&#160; You may also get asked about allowing a windows firewall exception, depending on your machine configuration.</p>  <p>Behind the scenes, the Neo4j Azure app will pull both the java runtime and neo4j zip files down from blob storage, unzip them and then call java to start things up.&#160; As you can imagine, this can take some time.</p>  <p>If you have the local Compute Emulator running, then you should be able to see logging information indicating what’s happening, for example:</p>  <p><a href="http://lh3.ggpht.com/_5dD_rBQSs2o/TWMlvBu3azI/AAAAAAAAA-c/_t2Xribl5LA/s1600-h/image%5B11%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_5dD_rBQSs2o/TWMlwYBlaeI/AAAAAAAAA-g/2Gy-j9FNIf0/image_thumb%5B5%5D.png?imgmax=800" width="484" height="273" /></a></p>  <p>8. Once everything is up and running you should be able to start a browser up and point it to the administration interface.&#160; On my machine that was <a href="http://localhost:5100">http://localhost:5100</a>.&#160; You can check the port number to use by having a look at the top of the log for this:</p>  <p><a href="http://lh6.ggpht.com/_5dD_rBQSs2o/TWMlwzPbLMI/AAAAAAAAA-k/KY45A_Jhj98/s1600-h/image%5B15%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh4.ggpht.com/_5dD_rBQSs2o/TWMlxsyeCTI/AAAAAAAAA-o/-MmHFf-0oJA/image_thumb%5B7%5D.png?imgmax=800" width="484" height="40" /></a></p>    <p>You should then see something like this:</p>  <p><a href="http://lh6.ggpht.com/_5dD_rBQSs2o/TWMlyVjZnyI/AAAAAAAAA-s/JwmXPSJCd04/s1600-h/image%5B23%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh3.ggpht.com/_5dD_rBQSs2o/TWMlzer61cI/AAAAAAAAA-w/4agoLSuXE20/image_thumb%5B11%5D.png?imgmax=800" width="484" height="392" /></a></p>  <p>That chart is showing data being added to the database.&#160; Just what we want to see!</p>  <p>So that’s it.&#160; The server is up and running and it wasn’t too hard at all!&#160; The Neo team is looking to make the whole process much simpler, but I think this is a great start and it is very welcome indeed!</p>  <p>If you do have problems, check the locations in the settings of the Neo4jServerHost in the Azure project to make sure they match your local values.&#160; You might just need to adjust them to get it working.</p>  <p>P.S. If you have questions, then ask in the Neo4j forums.&#160; I’m not an expert in any of this ;-)&#160; I’m just really pleased to be able to see it running on Azure.</p>